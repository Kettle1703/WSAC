<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Подача заявки</title>
  <link rel="icon" type="image/png" href="static/image/logo/pish_logo_square_32x32.png">
  <link rel="stylesheet" href="static/css/global.css">
  <link rel="stylesheet" href="static/css/style_header.css">
  <link rel="stylesheet" href="static/css/style_application_submit.css">
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="top_nav">

      <a href="index.html" class="logo">
        <img class="header_logo" alt="ПИШ" src="static/image/logo/pish_logo.png">
      </a>

      <nav class="header_nav">
        <ul class="header_list">
          <li><a class="header_link" href="index.html">Главная</a></li>
          <li><a class="header_link" href="schedule.html">Доклады</a></li>
          <li><a class="header_link" href="authors.html">Авторам</a></li>
          <li><a class="header_link" href="contacts.html">Контакты</a></li>
          <li><a class="header_link" href="archive.html">Архив</a></li>
        </ul>
      </nav>

      <div class="language-switcher">
        <span class="language-label">Language</span>
        <div class="language-dropdown">
          <div class="language-current">Русский</div>
          <ul class="language-options">
            <li>English</li>
          </ul>
        </div>
      </div>

      <a href="login.html" class="btn">ВХОД</a>
    </div>
  </header>

  <!-- Submit application -->

  <main class="main">
    <div class="container">
      <div class="applictaion_submit">
        <h2 class="applitation_submit_header">Подать заявку на участие в конференции</h2>
        <div class="inputs">
          
          <select class="select participation_form" id="participation">
            <option value="" disabled selected>Формат участия</option>
            <option value="full-time" selected>Очная</option>
            <option value="correspondence">Заочная</option>
            <option value="distant">Дистанционная</option>
          </select>
          
          <div class="text-field__input">
            <input class="field__input" type="text" placeholder="" required>
            <label class="text-field__placeholder">Название доклада</label>
          </div>
          
          <button type="button" id="add-coauthor-btn" class="btn btn-secondary">Добавить соавтора</button>
          <div id="coauthors-container">
            <div class="coauthor-block">
              <div class="text-field__input">
                <input class="field__input" type="text" placeholder="" required>
                <label class="text-field__placeholder">ФИО соавтора</label>
              </div>

              <select class="select organization">
                <option disabled selected>Организация/ВУЗ</option>
                <option value="pnipu">ФГБОУ ВО «ПНИПУ»</option>
                <option value="other">другое</option>
              </select>

              <div class="other-organization-container" style="display:none;">
                <input class="field__input" type="text" name="other_organization" placeholder="Организация/ВУЗ" />
              </div>
            </div>
          </div>

          <select class="select thematic-sections" id="section">
            <option value="" disabled selected>Тематические секции конференции</option>
            <option value="1">Новые материалы и технологии их создания</option>
            <option value="2">Современные методы обработки материалов</option>
            <option value="3">Передовые производственные технологии создания материалов и изделий</option>
            <option value="4">Аддитивные и гибридные технологии в машиностроении</option>
            <option value="5">Аэрокосмическая механика – самолеты будущего</option>
            <option value="6">Электромеханические системы</option>
            <option value="7">Математическое моделирование материалов, систем и процессов</option>
            <option value="8">Цифровые технологии и машинное обучение в машиностроении</option>
            <option value="9">Школьная секция</option>
          </select>

          <!-- Блок: Файл тезисов -->
          <div class="custom_file_wrapper">
            <label class="custom_file">
              <span class="file_label">Файл тезисов</span>
              <span class="file_button_wrapper">
                <span class="file_button">Выбрать файл</span>
                <input type="file" name="thesis-file" class="file_input" hidden>
              </span>
            </label>
            <p class="file_name_display">Файл не выбран</p>
          </div>

          <div class="uploaded_files">
            <p><a href="#" class="uploaded_file_link">Скачать загруженный файл</a></p>
          </div>

          <!-- Блок: Файл экспертного заключения -->
          <div class="custom_file_wrapper">
            <label class="custom_file">
              <span class="file_label">Файл экспертного заключения</span>
              <span class="file_button_wrapper">
                <span class="file_button">Выбрать файл</span>
                <input type="file" name="expert-file" class="file_input" hidden>
              </span>
            </label>
            <p class="file_name_display">Файл не выбран</p>
          </div>

          <div class="uploaded_files">
            <p><a href="#" class="uploaded_file_link">Скачать загруженный файл</a></p>
          </div>


          <div class="text-field__input">
            <input class="field__input" type="text" placeholder="" required>
            <label class="text-field__placeholder">Сведения о научном руководителе</label>
          </div>

          <div class="custom_checkbox">
            <span class="checkbox_label">Нужен сертификат участника?</span>
            <label class="checkmark_wrapper">
              <input type="checkbox" id="certificate">
              <span class="checkmark"></span>
            </label>
          </div>

          <div class="custom_checkbox">
            <span class="checkbox_label">Подписка на рассылку</span>
            <label class="checkmark_wrapper">
              <input type="checkbox" id="mailing">
              <span class="checkmark"></span>
            </label>
          </div>
          <button class="button">Сохранить данные</button>
          <button class="button">Отправить заявку на проверку</button>
        </div>
      </div>
      
    </div>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".custom_file_wrapper").forEach(wrapper => {
      const input = wrapper.querySelector('input[type="file"]');
      const display = wrapper.querySelector('.file_name_display');

      input.addEventListener("change", function () {
        const fileName = this.files[0] ? this.files[0].name : "Файл не выбран";
        display.textContent = fileName;
      });
    });
  });


  const container = document.getElementById('coauthors-container');
  const addBtn = document.getElementById('add-coauthor-btn');

  function createCoauthorBlock() {
    const block = document.createElement('div');
    block.classList.add('coauthor-block');

    block.innerHTML = `
      <div class="text-field__input">
        <input class="field__input" type="text" placeholder="" required>
        <label class="text-field__placeholder">ФИО соавтора</label>
      </div>

      <select class="select organization">
        <option disabled selected>Организация/ВУЗ</option>
        <option value="pnipu">ФГБОУ ВО «ПНИПУ»</option>
        <option value="other">другое</option>
      </select>

      <div class="other-organization-container" style="display:none;">
        <input class="field__input" type="text" name="other_organization" placeholder="Организация/ВУЗ" />
      </div>

      <button type="button" class="remove-coauthor-btn btn btn-small btn-danger">Удалить соавтора</button>
    `;

    // обработка select
    block.querySelector('select').addEventListener('change', function () {
      const otherField = this.nextElementSibling;
      otherField.style.display = this.value === 'other' ? 'block' : 'none';
    });

    // обработка удаления
    block.querySelector('.remove-coauthor-btn').addEventListener('click', () => {
      container.removeChild(block);
    });

    return block;
  }

  addBtn.addEventListener('click', () => {
    const newBlock = createCoauthorBlock();
    container.appendChild(newBlock);
  });

  // активация select в первом блоке
  const firstSelect = container.querySelector('select.organization');
  if (firstSelect) {
    firstSelect.addEventListener('change', function () {
      const otherField = this.nextElementSibling;
      otherField.style.display = this.value === 'other' ? 'block' : 'none';
    });
  }    
  </script>

</body>
</html>
